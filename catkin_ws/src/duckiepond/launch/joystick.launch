<launch>
    <arg name="gazebo" default="false"/>
    <arg name="veh" />

    <node pkg="joy" type="joy_node" name="joy" output="screen" />

    <group ns="$(arg veh)">
        <node pkg="joystick_control" type="joymapper_node.py" name="joymapper" output="screen" />
        
        <node if="$(arg gazebo)" pkg="joystick_control" type="heading_to_usv.py" name="heading_to_usv" output="screen" />

        <node unless="$(arg gazebo)" pkg="joystick_control" type="heading_to_motor_cmd.py" name="heading_to_motor_cmd" output="screen" />

        <node unless="$(arg gazebo)" pkg="rosserial_python" type="serial_node.py" name="rosserial" output="screen">
            <param name="port" value="/dev/ttyACM0" />
        </node>
    </group>
</launch>